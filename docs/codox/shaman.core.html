<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>shaman.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Shaman 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="shaman.core.html"><span>shaman.core</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="shaman.core.html#var--%3ERpcClient"><span>-&gt;RpcClient</span></a></li><li><a href="shaman.core.html#var-RPC"><span>RPC</span></a></li><li><a href="shaman.core.html#var-add-action"><span>add-action</span></a></li><li><a href="shaman.core.html#var-add-item"><span>add-item</span></a></li><li><a href="shaman.core.html#var-add-user"><span>add-user</span></a></li><li><a href="shaman.core.html#var-build-url"><span>build-url</span></a></li><li><a href="shaman.core.html#var-delete-item"><span>delete-item</span></a></li><li><a href="shaman.core.html#var-delete-user"><span>delete-user</span></a></li><li><a href="shaman.core.html#var-get-item"><span>get-item</span></a></li><li><a href="shaman.core.html#var-get-user"><span>get-user</span></a></li><li><a href="shaman.core.html#var-make-client"><span>make-client</span></a></li><li><a href="shaman.core.html#var-map-%3ERpcClient"><span>map-&gt;RpcClient</span></a></li><li><a href="shaman.core.html#var-parse-json"><span>parse-json</span></a></li><li><a href="shaman.core.html#var-recommend-topn"><span>recommend-topn</span></a></li><li><a href="shaman.core.html#var-response-handler"><span>response-handler</span></a></li><li><a href="shaman.core.html#var-rpc-delete"><span>rpc-delete</span></a></li><li><a href="shaman.core.html#var-rpc-get"><span>rpc-get</span></a></li><li><a href="shaman.core.html#var-rpc-post"><span>rpc-post</span></a></li><li><a href="shaman.core.html#var-suggest-topn"><span>suggest-topn</span></a></li><li><a href="shaman.core.html#var-to-csv-line"><span>to-csv-line</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>shaman.core documentation</h2><pre class="doc"></pre><div class="public" id="var--%3ERpcClient"><h3>-&gt;RpcClient</h3><div class="usage"><code>(-&gt;RpcClient host port api-key)</code></div><pre class="doc">Positional factory function for class shaman.core.RpcClient.
</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L41">Source</a></div></div><div class="public" id="var-RPC"><h3>RPC</h3><div class="usage"></div><pre class="doc"></pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L35">Source</a></div></div><div class="public" id="var-add-action"><h3>add-action</h3><div class="usage"><code>(add-action client user-id item-id action)</code><code>(add-action client user-id item-id action rate)</code><code>(add-action client user-id item-id action rate extra-params)</code></div><pre class="doc">adds action that connects the user and the item

Arguments:
  client    - an initialized RpcClient
  user-id   - an id of the user
  item-id   - an id of the item
  action    - a keyword or a string with action name,
            builtin actions [:rate :like :dislike :view :conversion]
Optional arguments:
  rate          - a value of rate action on the scale 1..5
  extra-params  - an additional arguments to pass into API
Usage:
  (add-action client &quot;user1&quot; &quot;item1&quot; :like)
  (add-action client &quot;user2&quot; &quot;item1&quot; :rate 5
  (add-action client &quot;user3&quot; &quot;item2&quot; :dislike 0 {:pio_t &quot;2013-09..&quot;}))</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L166">Source</a></div></div><div class="public" id="var-add-item"><h3>add-item</h3><div class="usage"><code>(add-item client item-id item-types)</code><code>(add-item client item-id item-types params)</code></div><pre class="doc">adds new item into the dataset
Arguments:
  client      - an initialized RpcClient
  item-id     - an id of the item
  item-types  - a vector of string with item&apos;s types
Optional arguments:
  params  - a Clojure map with additional descriptors
Usage:
  (add-item client &quot;item1&quot; [&quot;beer&quot; &quot;belgium&quot; &quot;duval&quot;]
  (add-item client &quot;item1&quot; [] {:pio_price 5.40 :pio_profit 0.24}))</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L124">Source</a></div></div><div class="public" id="var-add-user"><h3>add-user</h3><div class="usage"><code>(add-user client user-id)</code><code>(add-user client user-id user-params)</code></div><pre class="doc">add or update user info

Arguments:
  client  -  an initialized RpcClient
  user-id - an id of the user

Optional arguments:
  user-params - a clojure map with arguments for PredictionIO user API
                for example {:pio_latlng &quot;69.32,23.43&quot;, :pio_inactive false}

Usage:
  (add-user client &quot;user1&quot;)
  (add-user client &quot;user2&quot; {:pio_inactive false, :pio_latlng &quot;0.0,0.0&quot;})</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L90">Source</a></div></div><div class="public" id="var-build-url"><h3>build-url</h3><div class="usage"><code>(build-url client path)</code></div><pre class="doc">builds proper URL for predictionIO API
</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L29">Source</a></div></div><div class="public" id="var-delete-item"><h3>delete-item</h3><div class="usage"><code>(delete-item client item-id)</code></div><pre class="doc">remove item from recommender&apos;s dataset
Arguments:
  client  - an initialized RpcClient
  item-id - an id of the item
Usage:
  (delete-item client &quot;item1&quot;)</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L155">Source</a></div></div><div class="public" id="var-delete-user"><h3>delete-user</h3><div class="usage"><code>(delete-user client user-id)</code></div><pre class="doc">deletes user by user-id

Arguments:
  client  - an initialized RpcClient
  user-id = an id of the user
Usage:
  (delete-user client &quot;user1&quot;)</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L112">Source</a></div></div><div class="public" id="var-get-item"><h3>get-item</h3><div class="usage"><code>(get-item client item-id)</code></div><pre class="doc">request item from recommender&apos;s dataset
Arguments:
  client  - an initialized RpcClient
  item-id - an id of the item
Usage:
  (get-item client &quot;item1&quot;)</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L145">Source</a></div></div><div class="public" id="var-get-user"><h3>get-user</h3><div class="usage"><code>(get-user client user-id)</code></div><pre class="doc">returns user data from the recommender dataset

Arguments:
  client  - an initialized RpcClient
  user-id - an id of the user

Usage:
  (get-user client &quot;user1&quot;)</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L78">Source</a></div></div><div class="public" id="var-make-client"><h3>make-client</h3><div class="usage"><code>(make-client host api-key &amp; {:keys [port], :or {port 8000}})</code></div><pre class="doc">builds the new api-client
</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L72">Source</a></div></div><div class="public" id="var-map-%3ERpcClient"><h3>map-&gt;RpcClient</h3><div class="usage"><code>(map-&gt;RpcClient m__5818__auto__)</code></div><pre class="doc">Factory function for class shaman.core.RpcClient, taking a map of keywords to field values.
</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L41">Source</a></div></div><div class="public" id="var-parse-json"><h3>parse-json</h3><div class="usage"><code>(parse-json json-string)</code></div><pre class="doc"></pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L12">Source</a></div></div><div class="public" id="var-recommend-topn"><h3>recommend-topn</h3><div class="usage"><code>(recommend-topn client engine-name user-id max-n &amp; {:keys [item-types attributes latlng unit within], :or {item-types [], attributes [], latlng [], unit &quot;km&quot;}, :as extra-params})</code></div><pre class="doc">recommends topN items to user

Required arguments:
  client      - a initialized RpcClient
  engine-name - a name of recommendation engine
  user-id     - a id of user
  max-n       - a number of result should it return

Optional arguments:
  :item-types - a vector of string of item&apos;s type, [&quot;soup&quot;, &quot;cheap&quot;]
  :attributes - a vector of string with names of attributes to return
  :latlng     - a tuple of coordinates, [59.345 34.234]
  :within     - to specify a bounding distance
  :unit       - a unit of length of the :within argument

  You can also pass raw optional arguments (:pio_&lt;argname&gt;)
  as it&apos;s specified on the official PredictionIO API documentation,
  but then you have to take care of proper formatting by yourself
Usage:
  (recommend-topn client &quot;oracle1&quot; &quot;user1&quot; 10)
  (recommend-topn client &quot;oracle1&quot; &quot;user2&quot; 5
    :item-types [&quot;soup&quot; &quot;spicey&quot;] :pio_attributes &quot;price,name&quot;)</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L202">Source</a></div></div><div class="public" id="var-response-handler"><h3>response-handler</h3><div class="usage"><code>(response-handler {:keys [status body error], :as resp})</code></div><pre class="doc">handles api responses
</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L19">Source</a></div></div><div class="public" id="var-rpc-delete"><h3>rpc-delete</h3><div class="usage"><code>(rpc-delete this path)</code><code>(rpc-delete this path param)</code></div><pre class="doc"></pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/#L">Source</a></div></div><div class="public" id="var-rpc-get"><h3>rpc-get</h3><div class="usage"><code>(rpc-get this path)</code><code>(rpc-get this path params)</code></div><pre class="doc"></pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/#L">Source</a></div></div><div class="public" id="var-rpc-post"><h3>rpc-post</h3><div class="usage"><code>(rpc-post this path data)</code><code>(rpc-post this path data params)</code></div><pre class="doc"></pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/#L">Source</a></div></div><div class="public" id="var-suggest-topn"><h3>suggest-topn</h3><div class="usage"><code>(suggest-topn client engine-name item-id max-n &amp; {:keys [item-types attributes latlng within unit], :or {unit &quot;km&quot;}, :as extra-params})</code></div><pre class="doc">suggests topN most similar items
</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L247">Source</a></div></div><div class="public" id="var-to-csv-line"><h3>to-csv-line</h3><div class="usage"><code>(to-csv-line strings)</code></div><pre class="doc">converts vector of string into commaseparated string
</pre><div class="src-link"><a href="http://github.com/timgluz/shaman/blob/master/src/shaman/core.clj#L7">Source</a></div></div></div></body></html>